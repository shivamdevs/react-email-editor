"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var r=[],i=!1,l=function(){if(i)for(var e;e=r.shift();)e()},a="undefined"==typeof window?{__unlayer_lastEditorId:0}:window;a.__unlayer_lastEditorId=a.__unlayer_lastEditorId||0;var u=n.forwardRef((function(e,u){var c,d,s,f,p,y,v,h,m,E=e.onLoad,b=e.onReady,j=e.scriptUrl,_=e.minHeight,w=void 0===_?500:_,I=e.style,O=void 0===I?{}:I,g=t.useState(null),x=g[0],k=g[1],M=t.useState(!1),L=M[0],P=M[1],S=t.useMemo((function(){return e.editorId||"editor-"+ ++a.__unlayer_lastEditorId}),[e.editorId]),H=o({},e.options||{},{appearance:null!=(c=e.appearance)?c:null==(d=e.options)?void 0:d.appearance,displayMode:(null==e?void 0:e.displayMode)||(null==(s=e.options)?void 0:s.displayMode)||"email",locale:null!=(f=e.locale)?f:null==(p=e.options)?void 0:p.locale,projectId:null!=(y=e.projectId)?y:null==(v=e.options)?void 0:v.projectId,tools:null!=(h=e.tools)?h:null==(m=e.options)?void 0:m.tools,id:S,source:{name:"react-email-editor-patched-xsh2",version:"2.0.0"}});t.useImperativeHandle(u,(function(){return{editor:x}}),[x]),t.useEffect((function(){return function(){null==x||x.destroy()}}),[]),t.useEffect((function(){P(!1),function(e,t){if(void 0===t&&(t="https://editor.unlayer.com/embed.js?2"),r.push((function(){return P(!0)})),function(e){var t=document.querySelectorAll("script"),n=!1;return t.forEach((function(t){t.src.includes(e)&&(n=!0)})),n}(t))l();else{var n=(a=window.location,Object.defineProperty(window,"location",{configurable:!0,enumerable:!0,get:function(){return{href:"https://fake-url-for-script.com",protocol:"https:",host:"fake-url-for-script.com",hostname:"fake-url-for-script.com",pathname:"/",search:"",hash:""}},set:function(e){a.href=e}}),function(){Object.defineProperty(window,"location",{configurable:!0,enumerable:!0,value:a})}),o=document.createElement("script");o.setAttribute("src",t),o.onload=function(){i=!0,n(),l()},document.head.appendChild(o)}var a}(0,j)}),[j]),t.useEffect((function(){L&&(null==x||x.destroy(),k(unlayer.createEditor(H)))}),[JSON.stringify(H),L]);var R=Object.keys(e).filter((function(e){return/^on/.test(e)}));return t.useEffect((function(){x&&(null==E||E(x),R.forEach((function(t){/^on/.test(t)&&"onLoad"!==t&&"onReady"!==t&&"function"==typeof e[t]&&x.addEventListener(t,e[t])})),b&&x.addEventListener("editor:ready",(function(){b(x)})))}),[x,Object.keys(R).join(",")]),n.createElement("div",{style:{flex:1,display:"flex",minHeight:w}},n.createElement("div",{id:S,style:o({},O,{flex:1})}))}));exports.EmailEditor=u,exports.default=u;
//# sourceMappingURL=react-email-editor-patched-xsh2.cjs.production.min.js.map
