"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var r=[],i=!1,l=function(){if(i)for(var e;e=r.shift();)e()},d="undefined"==typeof window?{__unlayer_lastEditorId:0}:window;d.__unlayer_lastEditorId=d.__unlayer_lastEditorId||0;var a=n.forwardRef((function(e,a){var u,s,c,f,p,y,v,E,m,_=e.onLoad,h=e.onReady,j=e.scriptUrl,b=e.minHeight,I=void 0===b?500:b,O=e.style,g=void 0===O?{}:O,w=t.useState(null),x=w[0],M=w[1],L=t.useState(!1),S=L[0],H=L[1],R=t.useMemo((function(){return e.editorId||"editor-"+ ++d.__unlayer_lastEditorId}),[e.editorId]),k=o({},e.options||{},{appearance:null!=(u=e.appearance)?u:null==(s=e.options)?void 0:s.appearance,displayMode:(null==e?void 0:e.displayMode)||(null==(c=e.options)?void 0:c.displayMode)||"email",locale:null!=(f=e.locale)?f:null==(p=e.options)?void 0:p.locale,projectId:null!=(y=e.projectId)?y:null==(v=e.options)?void 0:v.projectId,tools:null!=(E=e.tools)?E:null==(m=e.options)?void 0:m.tools,id:R,source:{name:"react-email-editor",version:"1.7.11"}});t.useImperativeHandle(a,(function(){return{editor:x}}),[x]),t.useEffect((function(){return function(){null==x||x.destroy()}}),[]),t.useEffect((function(){H(!1),function(e,t){if(void 0===t&&(t="https://editor.unlayer.com/embed.js?2"),r.push((function(){return H(!0)})),function(e){var t=document.querySelectorAll("script"),n=!1;return t.forEach((function(t){t.src.includes(e)&&(n=!0)})),n}(t))l();else{var n=document.createElement("script");n.setAttribute("src",t),n.onload=function(){i=!0,l()},document.head.appendChild(n)}}(0,j)}),[j]),t.useEffect((function(){S&&(null==x||x.destroy(),M(unlayer.createEditor(k)))}),[JSON.stringify(k),S]);var q=Object.keys(e).filter((function(e){return/^on/.test(e)}));return t.useEffect((function(){x&&(null==_||_(x),q.forEach((function(t){/^on/.test(t)&&"onLoad"!==t&&"onReady"!==t&&"function"==typeof e[t]&&x.addEventListener(t,e[t])})),h&&x.addEventListener("editor:ready",(function(){h(x)})))}),[x,Object.keys(q).join(",")]),n.createElement("div",{style:{flex:1,display:"flex",minHeight:I}},n.createElement("div",{id:R,style:o({},g,{flex:1})}))}));exports.EmailEditor=a,exports.default=a;
//# sourceMappingURL=react-email-editor.cjs.production.min.js.map
